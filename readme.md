# Rust M3U8 ä¸‹è½½å™¨

ä¸€ä¸ªç”¨ Rust ç¼–å†™çš„é«˜æ€§èƒ½ M3U8 è§†é¢‘ä¸‹è½½å™¨ï¼Œæ”¯æŒåµŒå¥—æ’­æ”¾åˆ—è¡¨è§£æå’Œå¤šç§é«˜çº§åŠŸèƒ½ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… **æ ‡å‡† M3U8 æ’­æ”¾åˆ—è¡¨è§£æ** - å®Œæ•´æ”¯æŒ M3U8 æ ¼å¼è§„èŒƒ
- âœ… **åµŒå¥—æ’­æ”¾åˆ—è¡¨æ”¯æŒ** - è‡ªåŠ¨è¯†åˆ«ä¸»æ’­æ”¾åˆ—è¡¨å’Œå¤šä¸ªå˜ä½“æµ
- âœ… **å¤šçº¿ç¨‹å¹¶å‘ä¸‹è½½** - é«˜æ€§èƒ½å¹¶è¡Œä¸‹è½½è§†é¢‘ç‰‡æ®µ
- âœ… **æ™ºèƒ½å¹¿å‘Šè¿‡æ»¤** - åŸºäºæ­£åˆ™è¡¨è¾¾å¼çš„å¹¿å‘Šç‰‡æ®µæ£€æµ‹å’Œè¿‡æ»¤
- âœ… **ä»£ç†è´Ÿè½½å‡è¡¡** - å¤šä»£ç†æœåŠ¡å™¨æƒé‡è½®è¯¢
- âœ… **è‡ªå®šä¹‰è¯·æ±‚å¤´** - æ”¯æŒè®¤è¯å’Œè‡ªå®šä¹‰ HTTP å¤´
- âœ… **æ–­ç‚¹ç»­ä¼ ** - è‡ªåŠ¨é‡è¯•å¤±è´¥çš„ä¸‹è½½ä»»åŠ¡

### é«˜çº§ç‰¹æ€§
- ğŸ¯ **æ™ºèƒ½è´¨é‡é€‰æ‹©** - è‡ªåŠ¨é€‰æ‹©æœ€ä½³è´¨é‡çš„å˜ä½“æµ
- ğŸ”§ **å¤šç§åˆå¹¶æ¨¡å¼** - ç®€å•åˆå¹¶å’Œ FFmpeg é«˜è´¨é‡åˆå¹¶
- ğŸ“Š **å®æ—¶è¿›åº¦æ˜¾ç¤º** - è¯¦ç»†çš„ä¸‹è½½è¿›åº¦å’ŒçŠ¶æ€ä¿¡æ¯
- ğŸ›¡ï¸ **é”™è¯¯æ¢å¤** - å¼ºå¤§çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- ğŸ“ **æœ¬åœ°æ–‡ä»¶æ”¯æŒ** - æ”¯æŒæœ¬åœ° M3U8 æ–‡ä»¶å¤„ç†

## ğŸ“¦ å®‰è£…

### ä»æºç å®‰è£…
```bash
git clone https://github.com/Tinger-X/rust-m3u8.git
cd rust-m3u8
cargo install --path .
```

### ç›´æ¥è¿è¡Œ
```bash
cargo run -- [å‚æ•°]
```

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ä¸‹è½½
```bash
# ä¸‹è½½æ ‡å‡† M3U8 è§†é¢‘
rust-m3u8 https://example.com/playlist.m3u8

# ä¸‹è½½åµŒå¥—æ’­æ”¾åˆ—è¡¨
rust-m3u8 https://example.com/master.m3u8 -o high_quality_video
```

### é«˜çº§ä¸‹è½½
```bash
# ä½¿ç”¨ä»£ç†å’Œå¹¿å‘Šè¿‡æ»¤
rust-m3u8 https://example.com/playlist.m3u8 \
  -p "10,http://proxy1:8080" \
  -p "15,http://proxy2:8080" \
  -f "ad\\." \
  -f "tracking\\." \
  --use-ffmpeg
```

## ğŸ“š ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ç¨‹åº
é¡¹ç›®æä¾›äº†å¤šä¸ªç¤ºä¾‹ç¨‹åºï¼Œå±•ç¤ºä¸åŒåŠŸèƒ½çš„ä½¿ç”¨æ–¹å¼ï¼š

```bash
# è¿è¡ŒåŸºç¡€ä½¿ç”¨ç¤ºä¾‹
cargo run --example basic_usage

# è¿è¡Œé«˜çº§åŠŸèƒ½ç¤ºä¾‹
cargo run --example advanced_features

# è¿è¡Œæœ¬åœ°æ–‡ä»¶ç¤ºä¾‹
cargo run --example local_file_usage

# è¿è¡ŒåµŒå¥—æ’­æ”¾åˆ—è¡¨ç¤ºä¾‹
cargo run --example nested_m3u8
```

### ç¨‹åºåº“ä½¿ç”¨
```rust
use rust_m3u8::*;
use std::path::PathBuf;

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    let downloader = M3u8Downloader::new(
        "https://example.com/playlist.m3u8".to_string(),
        PathBuf::from("output.mp4"),
        PathBuf::from("temp"),
        10,
        false,
        None,
        3,
        None,
        vec![],
        vec![],
        false,
    );

    downloader.download().await?;
    Ok(())
}
```

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### æ¨¡å—ç»“æ„
```
src/
â”œâ”€â”€ lib.rs              # åº“å…¥å£å’Œå…¬å…±æ¥å£
â”œâ”€â”€ types.rs            # æ ¸å¿ƒæ•°æ®ç±»å‹å®šä¹‰
â”œâ”€â”€ downloader.rs       # ä¸‹è½½å™¨ä¸»é€»è¾‘å®ç°
â”œâ”€â”€ merger.rs           # è§†é¢‘åˆå¹¶åŠŸèƒ½
â”œâ”€â”€ proxy.rs           # ä»£ç†é…ç½®å’Œç®¡ç†
â”œâ”€â”€ error.rs           # é”™è¯¯ç±»å‹å®šä¹‰
â””â”€â”€ parser/            # è§£æå™¨æ¨¡å—
    â”œâ”€â”€ mod.rs         # æ¨¡å—å¯¼å‡º
    â”œâ”€â”€ content_parser.rs # å†…å®¹è§£æå™¨
    â”œâ”€â”€ master_parser.rs # ä¸»æ’­æ”¾åˆ—è¡¨è§£æå™¨
    â”œâ”€â”€ media_parser.rs  # åª’ä½“æ’­æ”¾åˆ—è¡¨è§£æå™¨
    â””â”€â”€ nested_parser.rs # åµŒå¥—æ’­æ”¾åˆ—è¡¨è§£æå™¨
```

### æ ¸å¿ƒç»„ä»¶
1. **M3u8Downloader** - ä¸»è¦çš„ä¸‹è½½å™¨æ¥å£
2. **NestedParser** - åµŒå¥—æ’­æ”¾åˆ—è¡¨è§£æå™¨
3. **ProxyConfig** - ä»£ç†é…ç½®ç®¡ç†
4. **VideoMerger** - è§†é¢‘åˆå¹¶å™¨
5. **M3u8Playlist** - æ’­æ”¾åˆ—è¡¨æ•°æ®ç»“æ„

## ğŸ§ª æµ‹è¯•

é¡¹ç›®åŒ…å«å®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼š

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cargo test

# è¿è¡Œç‰¹å®šæµ‹è¯•
cargo test test_m3u8_parser
cargo test test_downloader
cargo test test_integration

# è¿è¡Œæµ‹è¯•å¹¶æ˜¾ç¤ºè¾“å‡º
cargo test -- --nocapture
```

### æµ‹è¯•è¦†ç›–
- âœ… å•å…ƒæµ‹è¯• - å„ä¸ªæ¨¡å—çš„ç‹¬ç«‹æµ‹è¯•
- âœ… é›†æˆæµ‹è¯• - ç«¯åˆ°ç«¯çš„åŠŸèƒ½æµ‹è¯•
- âœ… è§£æå™¨æµ‹è¯• - M3U8 æ ¼å¼è§£ææµ‹è¯•
- âœ… ä¸‹è½½å™¨æµ‹è¯• - ä¸‹è½½æµç¨‹æµ‹è¯•

## ğŸ”§ å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ
- éµå¾ª Rust å®˜æ–¹ç¼–ç è§„èŒƒ
- ä½¿ç”¨ clippy è¿›è¡Œä»£ç æ£€æŸ¥
- å®Œæ•´çš„æ–‡æ¡£æ³¨é‡Š

### æ„å»ºå’Œè¿è¡Œ
```bash
# å¼€å‘æ„å»º
cargo build

# å‘å¸ƒæ„å»º
cargo build --release

# ä»£ç æ£€æŸ¥
cargo clippy

# æ ¼å¼æ£€æŸ¥
cargo fmt --check
```

## ğŸ“– æ–‡æ¡£

### åœ¨çº¿æ–‡æ¡£
```bash
# ç”Ÿæˆæœ¬åœ°æ–‡æ¡£
cargo doc --open
```

### ä½¿ç”¨æŒ‡å—
è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜è¯·å‚è€ƒ [examples/usage.md](examples/usage.md) æ–‡ä»¶ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ› é—®é¢˜åé¦ˆ

å¦‚æœæ‚¨é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼åé¦ˆï¼š

- [åˆ›å»º Issue](https://github.com/Tinger-X/rust-m3u8/issues)
- å‘é€é‚®ä»¶åˆ°é¡¹ç›®ç»´æŠ¤è€…

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

---

**Rust M3U8 ä¸‹è½½å™¨** - è®© M3U8 è§†é¢‘ä¸‹è½½å˜å¾—ç®€å•é«˜æ•ˆï¼ ğŸ¥
